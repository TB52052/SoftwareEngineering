<!DOCTYPE html>
<html>
<head>
    <%- include('partials/global-head') %>
    <%- include('partials/main-page-head') %>
    <link rel="stylesheet" href="/styles/side-bar.css">
    <link rel="stylesheet" href="/styles/calendar.css">
    <script> document.addEventListener('DOMContentLoaded', function () {
        renderCalendar();
    });
    
    function renderCalendar() {
        const now = new Date();
        const month = now.getMonth(); // current month
        const year = now.getFullYear(); // current year
    
        // Set month and year title
        const monthYearTitle = document.getElementById('calendar-month-year');
        monthYearTitle.textContent = `${now.toLocaleString('default', { month: 'long' })} ${year}`;
    
        const firstDay = new Date(year, month, 1);
        const daysInMonth = new Date(year, month + 1, 0).getDate();
    
        const dateString = firstDay.toLocaleDateString('en-us', {
            weekday: 'long',
            year: 'numeric',
            month: 'numeric',
            day: 'numeric',
        });
    
        const paddingDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].indexOf(dateString.split(', ')[0]);
    
        const calendarDays = document.getElementById('calendar-days');
        calendarDays.innerHTML = '';
    
        for (let i = 0; i < paddingDays + daysInMonth; i++) {
            const daySquare = document.createElement('li');
            daySquare.classList.add('calendar-day');
    
            if (i >= paddingDays) {
                daySquare.textContent = i - paddingDays + 1;
                daySquare.addEventListener('click', () => addTaskOrDeadline(daySquare));
            } else {
                daySquare.classList.add('padding');
            }
    
            calendarDays.appendChild(daySquare);
        }
    }
    
    function moveCalendar(months) {
        const currentMonthYear = document.getElementById('calendar-month-year').textContent;
        const [monthName, year] = currentMonthYear.split(' ');
        const monthIndex = new Date(`${monthName} 1, ${year}`).getMonth() + months;
    
        const newDate = new Date(year, monthIndex);
        renderCalendar(newDate);
    }
    
    function addTaskOrDeadline(dayElement) {
        // Example function to add tasks or deadlines
        const day = dayElement.textContent;
        const task = prompt('Enter your task for ' + day);
        if (task !== null && task !== '') {
        // You can add the task or deadline to your data structure or perform further actions here
        alert(`Task "${task}" added for ${day}`);
    }
}
    </script>
    <title>Study Planner - Profile</title>
</head>
<body>
    <div class="wrapper">
        <%- include('partials/side-bar') %>
        
        <div class="content">
            <div class="calendar">
                <div class="calendar-header">
                    <button onclick="moveCalendar(-1)">&#104;</button>
                    <h2 id="calendar-month-year"></h2>
                    <button onclick="moveCalendar(1)">&#10095;</button>
                </div>
                <div class="calendar-body">
                    <ul class="day-names">
                      <li>Sun</li><li>Mon</li><li>Tue</li><li>Wed</li><li>Thu</li><li>Fri</li><li>Sat</li>
                    </ul>
                    <ul id="calendar-days" class="days-grid">
                        <!-- Days will be generated by JavaScript -->
                    </ul>
                </div>
                <div class="view-selector">
                    <button onclick="switchView('month')">Month</button>
                    <button onclick="switchView('week')">Week</button>
                    <button onclick="switchView('day')">Day</button>
                    <button onclick="switchView('list')">List</button>
                </div>
                
            </div>
            
        </div>
    </div>
    <%- include('partials/error-box') %>
</body>
</html>